<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title class="" id="title"></title>

    <link rel="stylesheet" href="style.css">
</head>
<body class="font-sans bg-gray-100">
    <header class="w-full">
        <img id="header_banner_image" style="object-fit: cover;" class="z-0 h-24 md:h-56 w-full" src="images/headerbanner.png" alt="header banner">

        <div class="max-w-4xl mx-auto">
            <!-- <div class="logo w-32 mb-6 h-32 -mt-16">
            </div> -->
            <img id="logo_image_el" class="z-10 border-4 -mt-16 relative rounded-full aspect-w-4 border-white w-32 h-32" src="" alt="logo">

        </div>
    </header>

 
    <main class="max-w-4xl mx-auto">
        <div class="w-full lg:w-3/4 flex flex-start items-center my-2">
            <input type="search" class="w-full ml-2 bg-purple-white shadow rounded border-0 p-3" placeholder="Search by name...">
            <div class="text-purple-lighter mr-4 bg-purple-white shadow rounded border-0 p-4">
                <svg version="1.1" class="h-4 text-dark bg-purple-white" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                viewBox="0 0 52.966 52.966" style="enable-background:new 0 0 52.966 52.966;" xml:space="preserve">
                    <path d="M51.704,51.273L36.845,35.82c3.79-3.801,6.138-9.041,6.138-14.82c0-11.58-9.42-21-21-21s-21,9.42-21,21s9.42,21,21,21
                    c5.083,0,9.748-1.817,13.384-4.832l14.895,15.491c0.196,0.205,0.458,0.307,0.721,0.307c0.25,0,0.499-0.093,0.693-0.279
                    C52.074,52.304,52.086,51.671,51.704,51.273z M21.983,40c-10.477,0-19-8.523-19-19s8.523-19,19-19s19,8.523,19,19
                    S32.459,40,21.983,40z"/>
                </svg>
            </div>
        </div>

        <div class="w-full lg:flex mt-8">
            <div class="lg:w-3/4">
                <div id="wrapper" class="grid lg:grid-cols-3 grid-cols-2 gap-4">
                    
                </div>

                <!-- component -->
                <!-- <div class="mx-4">
                    <nav class="mt-4 mb-4 flex flex-row flex-nowrap justify-between md:justify-center items-center" aria-label="Pagination">
                        <a class="flex w-10 h-10 mr-1 justify-center items-center rounded-full border border-gray-200 bg-white text-black hover:border-gray-300" href="#" title="Previous Page">
                            <span class="sr-only">Previous Page</span>
                            <svg class="block w-4 h-4 fill-current" viewBox="0 0 256 512" aria-hidden="true" role="presentation">
                                <path d="M238.475 475.535l7.071-7.07c4.686-4.686 4.686-12.284 0-16.971L50.053 256 245.546 60.506c4.686-4.686 4.686-12.284 0-16.971l-7.071-7.07c-4.686-4.686-12.284-4.686-16.97 0L10.454 247.515c-4.686 4.686-4.686 12.284 0 16.971l211.051 211.05c4.686 4.686 12.284 4.686 16.97-.001z"></path>
                            </svg>
                        </a>
                        <a class="hidden md:flex w-10 h-10 mx-1 justify-center items-center rounded-full border border-gray-200 bg-white text-black hover:border-gray-300" href="#" title="Page 1">
                            1
                        </a>
                        <a class="hidden md:flex w-10 h-10 mx-1 justify-center items-center rounded-full border border-gray-200 bg-white text-black hover:border-gray-300" href="#" title="Page 2">
                            2
                        </a>
                        <a class="hidden md:flex w-10 h-10 mx-1 justify-center items-center rounded-full border border-black bg-black text-white pointer-events-none" href="#" aria-current="page" title="Page 3">
                            3
                        </a>
                        <a class="hidden md:flex w-10 h-10 mx-1 justify-center items-center rounded-full border border-gray-200 bg-white text-black hover:border-gray-300" href="#" title="Page 4">
                            4
                        </a>
                        <a class="hidden md:flex w-10 h-10 mx-1 justify-center items-center rounded-full border border-gray-200 bg-white text-black hover:border-gray-300" href="#" title="Page 5">
                            5
                        </a>
                        <a class="flex w-10 h-10 ml-1 justify-center items-center rounded-full border border-gray-200 bg-white text-black hover:border-gray-300" href="#" title="Next Page">
                            <span class="sr-only">Next Page</span>
                            <svg class="block w-4 h-4 fill-current" viewBox="0 0 256 512" aria-hidden="true" role="presentation">
                                <path d="M17.525 36.465l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L205.947 256 10.454 451.494c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l211.051-211.05c4.686-4.686 4.686-12.284 0-16.971L34.495 36.465c-4.686-4.687-12.284-4.687-16.97 0z"></path>
                            </svg>
                        </a>
                    </nav>
                </div> -->
            </div>
           

            <div class="lg:w-1/4 mx-2">
                <div class="w-full shadow-md bg-white rounded lg:mt-0 mt-4 p-4">
                    <h1 id="shop_name" class="text-2xl mtm-2 leading-none font-bold text-gray-900 capitalize"></h1>
                </div>

                <div class="w-full shadow-md bg-white rounded lg:mt-0 mt-4 p-4">
                    <h1 class="text-1xl font-bold text-gray-900 capitalize">About Shop</h1>
                    <p id="about_shop" class="text-gray-500 leading-tight text-base">
                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eaque veritatis repudiandae nemo tenetur ut. A debitis optio consequatur nisi sint fugit, consectetur tempore. Molestias dignissimos at obcaecati excepturi distinctio alias?
                    </p>
        
                    <hr class="my-2">
        
                    <h1 class="text-1xl font-bold text-gray-900 capitalize">Location</h1>
                    <p class="text-gray-500 leading-tight text-base">
                        Tech Junction
                    </p>
        
                    <hr class="my-2">
                    <h1 class="text-1xl font-bold text-gray-900 capitalize">Contact</h1>
                    <h1 class="text-sm  my-1 font-bold text-gray-700 capitalize">Telephone</h1>
                    <p id="phone" class="text-gray-500 leading-tight text-base">
                      
                    </p>
                    <a class="bg-gray-400 text-gray-500  my-1">Click to reveal</a>
                    <h1 class="text-sm font-bold text-gray-700 capitalize">Email</h1>
                    <p id="email" class="text-gray-500 leading-tight text-base">
                    
                    </p>
                    <h1 class="my-1 text-sm font-bold text-gray-700 capitalize">Social Media</h1>
                </div> 


                <div class="flex flex-col w-full my-4 justify-center">
                    <div class="w-full ">
                        <aside class="shadow-md border-2 border-green-500 bg-white p-4">
                            <h2 class="text-1xl text-bold text-gray-900 capitalize font-bold">Ashantiweb safety tips</h2>
                            <p class="font-normal text-gray-500">How to stay safe</p>
                            <ul class="list-inside list-disc text-gray-700">
                                <li>do something</li>
                                <li>do another thing</li>
                            </ul>
                        </aside>
        
                        <aside class="shadow-md bg-white p-4 mt-4">
                            <small class="font-light text-sm text-gray-500">promotion</small>
                            <h2 class="text-1xl text-bold text-gray-900 capitalize font-bold">Ashatiweb ADvantage</h2>
                            <p class="font-semibold text-gray-600">Get your online and boost your sales bla bla...</p>
                            <button class="mt-2 rounded w-full text-center bg-green-500 text-white text-semibold p-2">Add my business</button>
                        </aside>
                    </div>
                </div>
            </div>
        </div> 
    </main>
    

    <noscript>
        please for this page to work you need 
        to enable javascript in your browser settings 
    </noscript>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        axios.get('https://ashantiweb.com/api/shops/sandx-kloset')
        .then((r) =>  {
            console.log(r);
            handleResponse(r);
        })
        .catch((e) => {
            console.log(e);
        });
         
        function handleResponse(r){
            let data = r.data;
            displayHeaderPicture(data.cover_picture);
            setLogo(data.picture);
            setAboutShop(data.description);
            setShopName(data.name);
            setEmail(data.email);
            setPhone(data.phone);
            setTitle(data.name);

            setAds(data.ads);

        }

        function displayHeaderPicture(picture){
            let headerImageEl = queryElement("#header_banner_image");
            headerImageEl.setAttribute('src', `${picture}`);
        }

        function setLogo(logo){
            let logoImageEl = queryElement('#logo_image_el');
            logoImageEl.setAttribute('src', `${logo}`);
        }

        function setAboutShop(about_string){
            let aboutShopEl = queryElement('#about_shop');
            aboutShopEl.textContent = about_string;
        }

        function setShopName(shop_name){
            let shopNameEl = queryElement("#shop_name");
            shopNameEl.textContent = shop_name;
        }

        function setEmail(email){
            let emailEl = queryElement("#email");
            emailEl.textContent = email;
        }

        function setPhone(phone){
            let phoneEl = queryElement("#phone");
            phoneEl.textContent = phone;
        }

        function queryElement(string){
            return document.querySelector(string);
        }

        function setTitle(shop_name){
            let title = queryElement('#title');
            title.textContent = `${shop_name} | Ashantiweb`;
        }

        function setAds(ads){
           
            let adContainer = queryElement("#wrapper");
           // let adEl = queryElement("#ad");


            // let sampleDiv = document.createElement("div");
            //     let textNode = document.createTextNode("working");
            //      let workingDiv = sampleDiv.appendChild(textNode)
            //     adContainer.appendChild(workingDiv);

            ads.forEach(ad => {
                //console.log(generateAdWithTemplate(ad.picture, ad.name, ad.classified.name, ad.price));
                adContainer.appendChild(generateAdWithTemplate(
                   ad));
            });
        }


        function generateAdWithTemplate(ad){
            let  div = document.createElement('div');
            div.classList.add("ml-2","rounded-t-lg","shadow-md","bg-white" , "flex", "flex-col", "justify-between");

            let img = document.createElement('img');
            img.classList.add("w-full", "rounded-t-lg", "h-64", "object-cover");
            img.src = ad.picture;

            let textWrapperDiv = document.createElement('div');
            textWrapperDiv.classList.add("m-2");

            let adCategoryP = document.createElement('p');
            adCategoryP.classList.add("text-green-500", "font-semibold");
            adCategoryP.textContent = ad.category;

            let adNameP = document.createElement('p');
            adNameP.classList.add("text-gray-700", "font-semibold");
            adNameP.textContent = ad.name;

            let adPriceP = document.createElement('p');
            adPriceP.classList.add("text-gray-700", "mt-2", "font-semibold");
            adPriceP.textContent = `${ad.currency} ${ad.price}`;

            let viewDetailsButton = document.createElement('a');
            viewDetailsButton.href = `shop_detail.html?product_name=${ad.slug}`;
            viewDetailsButton.classList.add("mt-2", "rounded","w-full", "text-center", "bg-green-500", "text-white", "text-semibold", "p-2", "inline-block");
            viewDetailsButton.textContent = "View Details";

            //add img into div    
            div.appendChild(img);
            div.appendChild(textWrapperDiv);
            textWrapperDiv.appendChild(adCategoryP);
            textWrapperDiv.appendChild(adNameP);
            textWrapperDiv.appendChild(adPriceP);
            textWrapperDiv.appendChild(viewDetailsButton);

            return div;
        }

        console.log("js working");
    </script>
</body>
</html>